# スクロール機能

AiTestToolQには、要素が画面外にある場合でも正確にクリックできるようにするためのスクロール機能が実装されています。

## 概要

Webページでは、ターゲットとなる要素が画面の表示領域外にある場合、直接クリックすることができません。スクロール機能は、クリック操作の前に自動的に対象要素が画面内に表示されるようにスクロールします。

## 動作の仕組み

1. クリック操作（通常クリックまたは強制クリック）が実行されると、まず要素が検索されます
2. 要素が見つかると、その要素が画面内に表示されるように自動的にスクロールします
3. スクロールが完了した後、クリック操作が実行されます

## 対応している操作タイプ

以下の操作タイプでスクロール機能が自動的に適用されます：

- `クリック`: 通常のクリック操作
- `強制クリック`: JavaScriptを使用した強制的なクリック操作

## 技術的な実装

スクロール機能は、JavaScriptの`scrollIntoView()`メソッドを使用して実装されています。このメソッドは、指定された要素が表示されるように自動的にスクロールします。

```javascript
element.scrollIntoView({behavior: 'smooth', block: 'center'});
```

- `behavior: 'smooth'`: スムーズなスクロールアニメーションを提供します
- `block: 'center'`: 要素が画面の中央に表示されるようにスクロールします

## カスタマイズ

スクロール位置は、`scroll_to_element`関数の`align`パラメータで調整できます：

- `"start"`: 要素が画面の上部に表示されるようにスクロール
- `"center"`: 要素が画面の中央に表示されるようにスクロール（デフォルト）
- `"end"`: 要素が画面の下部に表示されるようにスクロール
- `"nearest"`: 要素が最も近い位置に表示されるようにスクロール

## 使用例

シナリオファイルでは、通常通りクリック操作を指定するだけで、自動的にスクロール機能が適用されます：

```
7,クリック,#bottom-button,,,画面下部のボタンをクリック,y
8,強制クリック,.hidden-element,,,非表示要素をクリック,y
```

## トラブルシューティング

スクロール後もクリックが失敗する場合は、以下を試してください：

1. `config.toml`ファイルで`action_delay`の値を増やす（例：1.5秒から3秒に）
2. 強制クリック（`強制クリック`）を使用する
3. 要素のセレクタが正確であることを確認する

## 注意事項

- 動的に生成される要素の場合、スクロール後に要素の位置が変わることがあります
- 固定ヘッダーがある場合、要素が隠れてしまう可能性があります。その場合は、スクロール位置を`"start"`または`"end"`に変更することを検討してください
