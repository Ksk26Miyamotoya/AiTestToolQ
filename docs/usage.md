# 使用方法

このドキュメントでは、Basic認証サイト同時アクセステストツールの基本的な使用方法について説明します。よくある質問については、[FAQ](faq.md)も参照してください。

## 基本的な実行方法

テストツールは、Pythonモジュールとして実行します。

```bash
# プロジェクトのルートディレクトリから実行
python -m src
```

## コマンドライン引数

テストツールは、以下のコマンドライン引数をサポートしています。

| 引数 | 説明 | デフォルト値 |
|-----|------|------------|
| `--config` | メイン設定ファイルのパス | resources/config.toml |
| `--url-config` | URL設定ファイルのパス | (メイン設定ファイルから読み込み) |
| `--user-config` | ユーザー設定ファイルのパス | (メイン設定ファイルから読み込み) |
| `--scenario-config` | シナリオファイルのパス | (メイン設定ファイルから読み込み) |
| `--test-mode` | テストモードで実行（ブラウザが表示される） | False |
| `--slow-mode` | スロー実行モードで実行（各アクション間に遅延を入れる） | False |
| `--action-delay` | スロー実行モード時のアクション間の遅延時間（秒） | 1.5 |
| `--debug` | デバッグモードで実行（詳細なログ出力） | False |
| `--gui` | GUIモードで実行 | False |

## コマンドライン引数と設定ファイルの関係

コマンドライン引数と設定ファイルの両方で同じ設定を指定できる場合、以下のルールが適用されます：

- `test_mode`と`slow_mode`: コマンドライン引数または設定ファイルのどちらかがtrueならtrueとして扱われます（OR条件）
- `action_delay`: コマンドライン引数が指定されていればそれが優先され、なければ設定ファイルの値が使用されます
- `debug_mode`: コマンドライン引数の`--debug`が指定されていれば設定ファイルの値より優先されます

## 使用例

### デフォルト設定で実行

```bash
python -m src
```

### GUIモードで実行

```bash
python -m src --gui
```

### テストモードで実行（ブラウザが表示される）

```bash
python -m src --test-mode
```

### スロー実行モードで実行（各アクション間に遅延を入れる）

```bash
python -m src --slow-mode
```

### 遅延時間を指定してスロー実行モードで実行

```bash
python -m src --slow-mode --action-delay 3.0
```

### 特定の設定ファイルを使用して実行

```bash
python -m src --config resources/my_config.toml
```

### 特定のURL設定とユーザー設定を指定して実行

```bash
python -m src --url-config resources/url/staging --user-config resources/user/test_user
```

### シナリオファイルを指定して実行

```bash
python -m src --scenario-config resources/scenario/login_only.csv
```

### デバッグモードで実行（詳細なログ出力）

```bash
python -m src --debug
```

## 実行結果

テスト実行後、以下の情報が表示されます。

```
テスト結果: 合計 2 セッション, 成功 2, 失敗 0
詳細な結果は 'output/20250402_064512/result/test_results.json' を参照してください
```

詳細な結果は、`output`ディレクトリ内のタイムスタンプ付きフォルダに保存されます。各セッションのログとスクリーンショットも同じフォルダに保存されます。

## 注意事項

- Pythonモジュールとして実行する場合は、必ずプロジェクトのルートディレクトリから実行してください。
- サブディレクトリから実行する場合は、まずプロジェクトルートに移動する必要があります。
- テストモードでは、ブラウザが表示されるため、GUIが利用可能な環境で実行する必要があります。
- スロー実行モードは、デバッグ時に各アクションの実行を視覚的に確認するのに役立ちます。
