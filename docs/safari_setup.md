# Safariブラウザの設定方法

AiTestToolQでSafariブラウザを使用するには、事前に以下の設定が必要です。

## 前提条件

- macOS 10.13 (High Sierra) 以降
- Safari 11.0 以降
- Xcode Command Line Tools

## 設定手順

### 1. 開発メニューの有効化

1. Safari を起動します
2. メニューバーから「Safari」→「環境設定(設定)」を選択します
3. 「詳細」タブを選択します
4. 「メニューバーに"開発"メニューを表示(Webデベロッパ用の機能を表示)」にチェックを入れます

### 2. リモートオートメーションの許可

1. Safari のメニューバーから「開発」→「リモートオートメーションを許可」を選択します
2. Safari を再起動します

### 3. 設定ファイルの変更

`resources/config.toml` ファイルを編集して、ブラウザ設定を変更します：

```toml
# ブラウザ設定
browser = "safari"  # 使用するブラウザを "safari" に設定
test_mode = true    # Safariはヘッドレスモードをサポートしていないため、test_modeをtrueにすることをお勧めします
```

## 注意事項

- Safariはヘッドレスモードをサポートしていません。`test_mode = false` を設定しても、ブラウザは常に表示されます。
- Safariでは一部のSeleniumコマンドが他のブラウザと異なる動作をする場合があります。
- テスト実行中にSafariの警告ダイアログが表示される場合は、「許可」をクリックしてください。
- macOSのセキュリティ設定によっては、追加の許可が必要になる場合があります。

## トラブルシューティング

### 「ブラウザの初期化に失敗しました」エラーが表示される場合

1. Safari が正しく起動しているか確認してください
2. 「リモートオートメーションを許可」が有効になっているか確認してください
3. Safari を再起動してください
4. macOS のセキュリティ設定を確認してください

### 「SafariDriver was not found」エラーが表示される場合

1. Xcode Command Line Tools がインストールされているか確認してください：
   ```bash
   xcode-select --install
   ```
2. SafariDriver が利用可能か確認してください：
   ```bash
   safaridriver --help
   ```

### その他の問題

Safari の開発メニューから「Web インスペクタ」を使用して、テスト中の問題をデバッグできます。
